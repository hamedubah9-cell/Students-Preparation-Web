<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Smythe University College (SUC) â€” Academic Hub</title>
<link href="https://fonts.googleapis.com/css?family=Inter:400,700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #f1f5f9;
  --card: #fff;
  --accent: #1e40af;
  --muted: #5b6b77;
  --gold: #d97706;
  --success: #22c55e;
  --danger: #c0392b;
  --dark-bg: #0b1220;
  --dark-card: #171a25;
  --dark-accent: #60a5fa;
}
body {
  font-family: 'Inter', system-ui, Arial;
  margin: 0;
  background: var(--bg);
  color: #071022;
  transition: background 0.3s, color 0.3s;
}
body.darkmode {
  background: var(--dark-bg);
  color: #e5e7eb;
}
.wrap { max-width: 1200px; margin: 20px auto; padding: 16px; }
header { display: flex; align-items: center; gap: 12px; }
.logo {
  width: 64px; height: 64px; border-radius: 12px;
  background: linear-gradient(135deg, var(--accent), #60a5fa);
  color: white; display: grid; place-items: center; font-weight: 800; font-size: 2em;
}
nav { margin-left: auto; display: flex; gap: 8px; align-items: center; }
.btn {
  background: var(--accent); color: white; padding: 8px 12px; border-radius: 8px;
  border: none; cursor: pointer; font-weight: 700; transition: background .2s;
}
.btn[disabled] { opacity: 0.6; cursor: not-allowed; }
.btn.danger { background: var(--danger); }
.btn.success { background: var(--success); }
.btn.gold { background: var(--gold); }
.btn.dark { background: #222; }
.card {
  background: var(--card); padding: 18px; border-radius: 14px;
  box-shadow: 0 6px 18px rgba(2,6,23,0.06); margin-top: 12px; transition: background 0.3s, color 0.3s;
}
body.darkmode .card { background: var(--dark-card); color: #e5e7eb; }
.courses { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 10px;}
.course {
  padding: 13px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.08);
  cursor: pointer; font-size: 1.2em; background: #f8fafc; transition: background .2s;
}
.course.active { background: var(--accent); color: #fff; }
body.darkmode .course { background: #222; color: #e5e7eb; border-color: #374151; }
.section { margin-top: 16px; }
.accordion .panel{ display:none; padding:10px; border-radius:10px; border:1px solid rgba(0,0,0,0.04); background:#fff;}
.qa{ margin:8px 0; border-bottom:1px solid #eee; }
.qa:last-child { border: none; }
.qa .qheader { font-weight: 700; cursor:pointer; padding:5px; border-radius:7px; }
.qa .qheader:hover { background: #f3f4f6;}
body.darkmode .qa .qheader:hover { background: #222; }
.qa .qmeta { font-size: .98em; color: var(--muted);}
.qa .qanswer { padding: 8px 0 0 16px; }
.fav { color: var(--gold); cursor:pointer; font-size:1.3em;}
.fav.on { color: #eab308;}
.chat { height: 270px; overflow:auto; border:1px solid rgba(0,0,0,0.08); padding:8px; border-radius:8px; background:#fff; margin-bottom:8px;}
body.darkmode .chat { background:#1c2231; border-color:#374151;}
.side { margin-top:12px; }
.form-row { display: flex; gap: 8px; align-items: center; }
input,select,textarea {
  padding: 10px; border-radius: 8px; border:1px solid rgba(0,0,0,0.08); font-size: 1em;
  background: #f9fafb; color: #111;
}
body.darkmode input, body.darkmode select, body.darkmode textarea {
  background: #171a25; color: #e5e7eb; border-color: #374151;
}
pre { white-space: pre-wrap; background: #f8fafc; padding: 10px; border-radius: 8px; }
body.darkmode pre { background: #171a25; color: #e5e7eb; }
.muted { color: var(--muted);}
#userList { margin-top:10px; font-size:0.97em; }
.searchRow{ display:flex; align-items:center; gap:6px; margin-bottom:10px;}
#searchInput{ flex:1; }
#progressBar{ width:100%; height:12px; border-radius:6px; background:#f1f5f9; margin:6px 0 14px 0; overflow:hidden;}
#progressFill{ height:12px; background: var(--accent); width:0%; transition:width .5s;}
body.darkmode #progressBar { background: #222; }
body.darkmode #progressFill { background: #60a5fa; }
#quizModal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.3); align-items:center; justify-content:center; z-index:9999;}
#quizModal .inner { background:white; padding:22px; border-radius:16px; max-width:390px; width:99%; }
body.darkmode #quizModal .inner { background:#171a25; color:#e5e7eb;}
@media (max-width:650px){ .wrap{padding:5px;} .card{padding:10px;} header h1{font-size:1.1em;} }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo">SUC</div>
    <div>
      <h1>Smythe University College â€” Academic Hub</h1>
      <div>Prepared by Student Akin S. Sokpah</div>
    </div>
    <nav>
      <button class="btn" id="btnLogin">Sign In / Sign Up</button>
      <button class="btn danger" id="btnSignOut" style="display:none;">Sign Out</button>
      <button class="btn dark" id="toggleDark">ðŸŒ™ Dark</button>
    </nav>
  </header>
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div><strong>Courses</strong></div>
      <div id="welcome" class="muted">Not signed in</div>
    </div>
    <div class="courses" style="margin-top:12px">
      <div class="course" data-course="English.101">ðŸ§  English.101</div>
      <div class="course" data-course="Mathematics.101">ðŸ§® Mathematics.101</div>
      <div class="course" data-course="Biology.101">ðŸ§¬ Biology.101</div>
    </div>
    <div id="userList" class="muted"></div>
    <div id="progressBar"><div id="progressFill"></div></div>
    <div class="searchRow">
      <input id="searchInput" placeholder="Find a question...">
      <button class="btn" id="searchBtn">Search</button>
      <button class="btn gold" id="clearSearch">Clear</button>
      <button class="btn success" id="quizBtn">ðŸŽ² Random Quiz</button>
    </div>
    <div id="content" class="section" style="display:none;">
      <!-- English -->
      <div id="English.101" class="card course-content">
        <h3>English.101 â€” Full Q&A</h3>
        <div class="accordion" id="englishAccordion"></div>
      </div>
      <!-- Math -->
      <div id="Mathematics.101" class="card course-content" style="display:none;">
        <h3>Mathematics.101 â€” Full Q&A</h3>
        <div class="accordion" id="mathAccordion"></div>
      </div>
      <!-- Biology -->
      <div id="Biology.101" class="card course-content" style="display:none;">
        <h3>Biology.101 â€” Full Q&A</h3>
        <div class="accordion" id="biologyAccordion"></div>
      </div>
    </div>
    <div id="lockedMsg" class="card" style="text-align:center;color:#c0392b;">Sign in or sign up to view exclusive Q&A content!</div>
    <div class="side" style="display:none;">
      <h4>Group Chat (S.U.C Students)</h4>
      <div id="chat" class="chat"></div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <input id="msgInput" placeholder="Type a message..." style="flex:1"/>
        <button class="btn" id="sendMsg">Send</button>
      </div>
      <div style="margin-top:8px"><small>Chat connected via Firebase Realtime Database â€” auto-join after sign in.</small></div>
    </div>
  </div>
  <!-- Sign up / Sign in modal -->
  <div id="authModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;z-index:9999;">
    <div style="background:white;padding:16px;border-radius:12px;max-width:420px;width:100%">
      <h3 id="authTitle">Sign Up</h3>
      <div class="form-row" style="flex-direction:column">
        <input id="fullName" placeholder="Full name" />
        <input id="email" placeholder="Email" type="email" />
        <input id="password" placeholder="Password" type="password" />
        <select id="courseSelect">
          <option>English.101</option><option>Mathematics.101</option><option>Biology.101</option>
        </select>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn success" id="doSignUp">Create account</button>
          <button class="btn dark" id="toggleAuth">Switch to Sign In</button>
          <button class="btn" id="closeAuth" style="background:#374151">Close</button>
        </div>
      </div>
      <div id="authMsg" style="margin-top:8px;color:crimson"></div>
    </div>
  </div>
  <!-- Quiz Modal -->
  <div id="quizModal"><div class="inner" id="quizInner"></div></div>
</div>
<!-- Firebase SDKs (modular) -->
<script type="module">
// Firebase Setup (replace with your config)
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
import { getDatabase, ref, push, onChildAdded, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
const firebaseConfig = {
  apiKey: "AIzaSyC7cAN-mrE2PvmlQ11zLKAdHBhN7nUFjHw",
  authDomain: "fir-u-c-students-web.firebaseapp.com",
  projectId: "fir-u-c-students-web",
  storageBucket: "fir-u-c-students-web.firebasestorage.app",
  messagingSenderId: "113569186739",
  appId: "1:113569186739:web:d8daf21059f43a79e841c6"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const rdb = getDatabase(app);
// UI elements
const btnLogin = document.getElementById('btnLogin');
const authModal = document.getElementById('authModal');
const toggleAuth = document.getElementById('toggleAuth');
const doSignUp = document.getElementById('doSignUp');
const closeAuth = document.getElementById('closeAuth');
const authTitle = document.getElementById('authTitle');
const authMsg = document.getElementById('authMsg');
const btnSignOut = document.getElementById('btnSignOut');
const welcome = document.getElementById('welcome');
const sendMsg = document.getElementById('sendMsg');
const chatDiv = document.getElementById('chat');
const lockedMsg = document.getElementById('lockedMsg');
const content = document.getElementById('content');
const side = document.querySelector('.side');
const userList = document.getElementById('userList');
const toggleDark = document.getElementById('toggleDark');
const progressBar = document.getElementById('progressBar');
const progressFill = document.getElementById('progressFill');
const quizBtn = document.getElementById('quizBtn');
const quizModal = document.getElementById('quizModal');
const quizInner = document.getElementById('quizInner');
let isSignUp = true;
// Auth
btnLogin.onclick = ()=>{authModal.style.display='flex';authTitle.textContent='Sign Up';isSignUp=true;}
closeAuth.onclick = ()=>authModal.style.display='none';
toggleAuth.onclick = ()=>{isSignUp=!isSignUp;authTitle.textContent=isSignUp?'Sign Up':'Sign In';};
doSignUp.onclick = async ()=>{
  authMsg.textContent = '';
  const name = document.getElementById('fullName').value.trim();
  const email = document.getElementById('email').value.trim();
  const pw = document.getElementById('password').value;
  const course = document.getElementById('courseSelect').value;
  if (!email || !pw) { authMsg.textContent='Email and password required'; return; }
  try{
    if (isSignUp){
      const userCred = await createUserWithEmailAndPassword(auth, email, pw);
      const uid = userCred.user.uid;
      await setDoc(doc(db,'students',uid), { name, email, course, createdAt: new Date().toISOString(), lastLogin: new Date().toISOString() });
      authMsg.style.color='green'; authMsg.textContent='Account created. You are signed in.'; authModal.style.display='none';
    } else {
      await signInWithEmailAndPassword(auth, email, pw);
      const user = auth.currentUser;
      if (user) await setDoc(doc(db,'students',user.uid), { lastLogin: new Date().toISOString() }, {merge:true});
      authMsg.style.color='green'; authMsg.textContent='Signed in.'; authModal.style.display='none';
    }
  }catch(e){ authMsg.style.color='crimson'; authMsg.textContent = e.message; }
};
btnSignOut.onclick = async ()=>{ await signOut(auth); };
// Auth state change
onAuthStateChanged(auth, async user => {
  const showHide = (show)=>{
    content.style.display=show?'block':'none';
    lockedMsg.style.display=show?'none':'block';
    side.style.display=show?'block':'none';
    progressBar.style.display=show?'block':'none';
  };
  if (user){
    btnLogin.style.display='none'; btnSignOut.style.display='inline-block';
    const profile = await getDoc(doc(db,'students',user.uid));
    let name = profile.exists() ? profile.data().name : (user.email || 'Student');
    let course = profile.exists() ? profile.data().course : '';
    let lastLogin = profile.exists() ? profile.data().lastLogin : '';
    welcome.textContent = `Welcome, ${name}${course?', '+course:''}${lastLogin?`, Last login: ${new Date(lastLogin).toLocaleString()}`:''}`;
    showHide(true);
    // auto-join chat
    const chatRef = ref(rdb,'group_chat/messages');
    push(chatRef, { sender:'System', message: name + ' joined the chat', ts: serverTimestamp() });
    // List users online (basic)
    let students = await getDocs(collection(db,'students'));
    let onlineUsers = [];
    students.forEach(docu=>{
      let d = docu.data();
      if (d && d.lastLogin && (new Date()-new Date(d.lastLogin)<1000*3600*2))
        onlineUsers.push(d.name+(d.course?` (${d.course})`:''));
    });
    userList.textContent = "Online now: "+(onlineUsers.length?onlineUsers.join(', '):'No one else online');
  } else {
    btnLogin.style.display='inline-block'; btnSignOut.style.display='none';
    welcome.textContent = 'Not signed in';
    showHide(false);
    userList.textContent = '';
  }
};
// Chat
sendMsg.onclick = async ()=>{
  const text = document.getElementById('msgInput').value.trim();
  if (!text) return;
  const user = auth.currentUser;
  let sender = user ? (await getDoc(doc(db,'students',user.uid)).then(d=>d.data().name)) : 'Guest';
  const chatRef = ref(rdb,'group_chat/messages');
  await push(chatRef, { sender, message: text, ts: serverTimestamp() });
  document.getElementById('msgInput').value='';
};
const messagesRef = ref(rdb,'group_chat/messages');
onChildAdded(messagesRef, snapshot => {
  const v = snapshot.val();
  const time = v.ts ? new Date(v.ts).toLocaleTimeString() : '';
  const el = document.createElement('div');
  el.innerHTML = '<strong>'+ (v.sender || 'Unknown') +'</strong>: '+ (v.message || '') + (time ? ' <small style="color:#666">('+time+')</small>' : '');
  chatDiv.appendChild(el);
  chatDiv.scrollTop = chatDiv.scrollHeight;
});
// Dark mode
toggleDark.onclick = ()=>{
  document.body.classList.toggle('darkmode');
  toggleDark.textContent = document.body.classList.contains('darkmode') ? 'â˜€ï¸ Light' : 'ðŸŒ™ Dark';
};
// Course navigation
document.querySelectorAll('.course').forEach(c=>c.onclick = ()=>{
  document.querySelectorAll('.course').forEach(cc=>cc.classList.remove('active'));
  c.classList.add('active');
  document.querySelectorAll('.course-content').forEach(cc=>cc.style.display='none');
  const id = c.getAttribute('data-course');
  const el = document.getElementById(id);
  if (el) el.style.display='block';
  updateProgress(id);
});
// Utility: favorite system
function setFav(qid, on){ localStorage.setItem('fav_'+qid,on?'1':'0'); }
function getFav(qid){ return localStorage.getItem('fav_'+qid)=='1'; }
// Utility: search/filter
function renderAccordion(el, data, course){
  el.innerHTML = '';
  data.forEach((q,i)=>{
    let qid = course+'_'+i;
    let fav = getFav(qid);
    let qa = document.createElement('div');
    qa.className = 'qa';
    qa.innerHTML = `<div class="qheader"><span class="fav${fav?' on':''}" data-id="${qid}">&#9733;</span> <strong>Q${i+1}:</strong> ${q.question}</div><div class="qmeta">${q.section?`[${q.section}]`:''} ${q.type?`(${q.type})`:''}</div><div class="qanswer" style="display:none;"><em>Answer:</em> ${q.answer||''}${q.explanation?`<br><span class="muted">${q.explanation}</span>`:''}${q.table?formatTable(q.table):''}${q.examples?'<br><strong>Examples:</strong> '+q.examples.join(', '):''}${q.options?'<br><strong>Options:</strong> '+q.options.join(', '):''}</div>`;
    el.appendChild(qa);
  });
  el.querySelectorAll('.fav').forEach(f=>{
    f.onclick = ()=>{ let id=f.getAttribute('data-id'); let on=!getFav(id); setFav(id,on); f.classList.toggle('on',on);}
  });
  el.querySelectorAll('.qheader').forEach(h=>{
    h.onclick = ()=>{ let ans = h.parentNode.querySelector('.qanswer'); ans.style.display = ans.style.display=='none'?'block':'none'; }
  });
}
function formatTable(tbl){
  let html = '<table style="margin:6px 0 0 10px;border-collapse:collapse;">';
  let keys = Object.keys(tbl[0]);
  html += '<tr>'+keys.map(k=>'<th style="border:1px solid #ccc;padding:3px;">'+k+'</th>').join('')+'</tr>';
  tbl.forEach(row=>{ html+='<tr>'+keys.map(k=>'<td style="border:1px solid #eee;padding:3px;">'+row[k]+'</td>').join('')+'</tr>'; });
  html+='</table>'; return html;
}
document.getElementById('searchBtn').onclick = ()=>{
  let val = document.getElementById('searchInput').value.toLowerCase();
  renderAccordion(document.getElementById('englishAccordion'),englishQA.filter(q=>q.question.toLowerCase().includes(val)||q.answer.toLowerCase().includes(val)||((q.options||[]).join('').toLowerCase().includes(val))),"English.101");
  renderAccordion(document.getElementById('mathAccordion'),mathQA.filter(q=>q.question.toLowerCase().includes(val)||q.answer.toLowerCase().includes(val)||((q.options||[]).join('').toLowerCase().includes(val))),"Mathematics.101");
  renderAccordion(document.getElementById('biologyAccordion'),biologyQA.filter(q=>q.question.toLowerCase().includes(val)||q.answer.toLowerCase().includes(val)||((q.options||[]).join('').toLowerCase().includes(val))),"Biology.101");
};
document.getElementById('clearSearch').onclick = ()=>{
  document.getElementById('searchInput').value='';
  renderAccordion(document.getElementById('englishAccordion'),englishQA,"English.101");
  renderAccordion(document.getElementById('mathAccordion'),mathQA,"Mathematics.101");
  renderAccordion(document.getElementById('biologyAccordion'),biologyQA,"Biology.101");
};
// Progress tracker
function updateProgress(course){
  let arr = course=="English.101"?englishQA:(course=="Mathematics.101"?mathQA:biologyQA);
  let total = arr.length;
  let favs = arr.filter((q,i)=>getFav(course+'_'+i)).length;
  progressFill.style.width = (100*favs/total).toFixed(1)+'%';
  progressBar.title = `Favorited ${favs} of ${total} questions`;
}
// Quiz feature
quizBtn.onclick = ()=>{
  let courseTab = document.querySelector('.course.active');
  let courseId = courseTab?courseTab.getAttribute('data-course'):"English.101";
  let arr = courseId=="English.101"?englishQA:(courseId=="Mathematics.101"?mathQA:biologyQA);
  let idx = Math.floor(Math.random()*arr.length);
  let q = arr[idx];
  quizInner.innerHTML = `<h3>Random Quiz</h3><div style="margin-bottom:12px;"><strong>Q:</strong> ${q.question}</div>${q.options?'<div style="margin-bottom:12px;"><strong>Options:</strong> '+q.options.join(', ')+'</div>':''}<button class="btn success" id="showAnsBtn">Show Answer</button><div id="quizAns" style="display:none;margin-top:10px;"><strong>Answer:</strong> ${q.answer||''}${q.explanation?`<br><span class="muted">${q.explanation}</span>`:''}${q.table?formatTable(q.table):''}${q.examples?'<br><strong>Examples:</strong> '+q.examples.join(', '):''}</div><button class="btn gold" id="closeQuizBtn" style="margin-top:14px;">Close</button>`;
  quizModal.style.display = 'flex';
  document.getElementById('showAnsBtn').onclick = ()=>{document.getElementById('quizAns').style.display='block';};
  document.getElementById('closeQuizBtn').onclick = ()=>{quizModal.style.display='none';};
};
quizModal.onclick = e=>{ if(e.target===quizModal) quizModal.style.display='none'; };
// --- DATA SECTION ---
// Paste your full datasets below (English101_full_QA, Math101_full_QA, Biology101_full_QA)
// For brevity, load just a few items per section. For full build, paste all Q&A objects.
// --- English Q&A ---
const englishQA = [
  // Paste from English101_full_QA here (see previous completions)
  {"section":"Definition and Function of Nouns","type":"multiple choice","question":"What does the Latin root nomen mean?","options":["Word","Name","Title","Idea"],"answer":"Name"},
  {"section":"Definition and Function of Nouns","type":"multiple choice","question":"Which of the following is not a noun?","options":["Honesty","Run","Denmark","Refrigerator"],"answer":"Run"},
  {"section":"Definition and Function of Nouns","type":"short answer","question":"Explain why nouns are essential in everyday communication using the hamburger example.","answer":"Nouns name people (chef), places (restaurant), things (hamburger), and ideas (hunger)."},
  {"section":"Definition and Function of Nouns","type":"short answer","question":"Define a noun and give two examples from each category: people, places, things, and ideas.","answer":"A noun names a person (chef, teacher), place (Liberia, classroom), thing (desk, book), or idea (freedom, honesty)."},
  {"section":"Types of Nouns","type":"fill in the blank","question":"Common nouns begin with ___ letters unless they start a sentence.","answer":"lowercase"},
  // ... Add all other Q&A objects for English here
];
// --- Math Q&A ---
const mathQA = [
  // Paste from Math101_full_QA here (see previous completions)
  {"section":"Fractions: Types and Operations","type":"definition","question":"What is a proper fraction?","answer":"A fraction where the numerator is less than the denominator.","examples":["2/3","3/5","5/7","7/8"]},
  {"section":"Fractions: Types and Operations","type":"definition","question":"What is an improper fraction?","answer":"A fraction where the numerator is equal to or greater than the denominator.","examples":["5/3","13/5","15/8","29/6"]},
  {"section":"Addition and Subtraction of Fractions","type":"procedure","question":"How do you add or subtract fractions?","answer":"Fractions must have the same denominator. Use LCM of denominators to find a common base."},
  {"section":"Addition and Subtraction of Fractions","type":"example","question":"2/5 + 1/2","answer":"4/10 + 5/10 = 9/10"},
  // ... Add all other Q&A objects for Math here
];
// --- Biology Q&A ---
const biologyQA = [
  // Paste from Biology101_full_QA here (see previous completions)
  {"section":"Module 1: Foundations of Biology","type":"multiple choice","question":"The term biology means:","options":["Study of earth","Study of plants","Study of life","Study of matter"],"answer":"Study of life"},
  {"section":"Module 1: Foundations of Biology","type":"multiple choice","question":"The branch of biology that deals with the study of animals is called:","options":["Botany","Zoology","Anatomy","Microbiology"],"answer":"Zoology"},
  {"section":"Module 1: Foundations of Biology","type":"multiple choice","question":"The scientific study of plants is known as:","options":["Zoology","Ecology","Botany","Pathology"],"answer":"Botany"},
  // ... Add all other Q&A objects for Biology here
];
renderAccordion(document.getElementById('englishAccordion'),englishQA,"English.101");
renderAccordion(document.getElementById('mathAccordion'),mathQA,"Mathematics.101");
renderAccordion(document.getElementById('biologyAccordion'),biologyQA,"Biology.101");
updateProgress("English.101");
document.querySelector('.course[data-course="English.101"]').classList.add('active');
// End DATA
</script>
</body>
</html>
